{% extends '::base.html.twig' %}

{% block main -%}
<!-- BEGIN PAGE CONTAINER -->
    <div class="page-container">
        <!-- BEGIN PAGE HEAD -->
        <div class="page-head">
            <div class="container">
                    <!-- BEGIN PAGE TITLE -->
                    <div class="page-title">
                            <h1>Détails <small>de la demande </small></h1>
                    </div>
                    <!-- END PAGE TITLE -->
                    <!-- BEGIN PAGE TOOLBAR -->
                    <div class="page-toolbar">
                            <!-- BEGIN THEME PANEL -->
                            <div class="btn-group btn-theme-panel">
                                    <a href="javascript:;" class="btn dropdown-toggle" data-toggle="dropdown">
                                    <i class="icon-settings"></i>
                                    </a>
                                    <div class="dropdown-menu theme-panel pull-right dropdown-custom hold-on-click">
                                            <div class="row">
                                                    <div class="col-md-12">
                                                            <h3>EXPORTER</h3>
                                                            <div class="row">
                                                                    <div class="col-md-12">
                                                                            <ul class="theme-colors">
                                                                                    <li class="theme-color theme-color-default" data-theme="default">
                                                                                            <span class="theme-color-view"></span>
                                                                                            <span class="theme-color-name">Excel</span>
                                                                                    </li>
                                                                                    <li class="theme-color theme-color-blue-hoki" data-theme="blue-hoki">
                                                                                            <span class="theme-color-view"></span>
                                                                                            <span class="theme-color-name">Json</span>
                                                                                    </li>
                                                                                    <li class="theme-color theme-color-blue-steel" data-theme="blue-steel">
                                                                                            <span class="theme-color-view"></span>
                                                                                            <span class="theme-color-name">Word</span>
                                                                                    </li>
                                                                                    <li class="theme-color theme-color-yellow-orange" data-theme="yellow-orange">
                                                                                            <span class="theme-color-view"></span>
                                                                                            <span class="theme-color-name">PDF</span>
                                                                                    </li>
                                                                                    <li class="theme-color theme-color-yellow-crusta" data-theme="yellow-crusta">
                                                                                            <span class="theme-color-view"></span>
                                                                                            <span class="theme-color-name">Xml</span>
                                                                                    </li>
                                                                            </ul>
                                                                    </div>
                                                            </div>
                                                    </div>
                                            </div>
                                    </div>
                            </div>
                            <!-- END THEME PANEL -->
                    </div>
                    <!-- END PAGE TOOLBAR -->
            </div>
        </div>
        <!-- END PAGE HEAD -->
        <!-- BEGIN PAGE CONTENT -->
        <div class="page-content">
            <div class="container">
                    <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
                    <div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                    <div class="modal-content">
                                            <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h4 class="modal-title">Modal title</h4>
                                            </div>
                                            <div class="modal-body">
                                                     Widget settings form goes here
                                            </div>
                                            <div class="modal-footer">
                                                    <button type="button" class="btn blue">Save changes</button>
                                                    <button type="button" class="btn default" data-dismiss="modal">Close</button>
                                            </div>
                                    </div>
                                    <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                    </div>
                    <!-- /.modal -->
                    <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
                    <!-- BEGIN PAGE BREADCRUMB -->
                    <ul class="page-breadcrumb breadcrumb">
                            <li>
                                    <a href="{{ path('welcome') }}">Tableau de bord</a><i class="fa fa-circle"></i>
                            </li>
                            <li>
                                    <a href="{{ path('sa_demandes') }}">Historique demandes</a>
                                    <i class="fa fa-circle"></i>
                            </li>
                            <li class="active">
                                     Détail demande
                            </li>
                    </ul>
                    <!-- END PAGE BREADCRUMB -->
                    <!-- BEGIN PAGE CONTENT INNER -->
                    <div class="portlet light">
                            <div class="portlet-body">
                                    <div class="invoice">
                                            <div class="row invoice-logo">
                                                    <div class="col-xs-6 invoice-logo-space">
                                                            <img src="{{ asset('bundles/kbhgestionconges/assets/admin/pages/media/invoice/CNPS-logo.png') }}" class="img-responsive" alt=""/>
                                                    </div>
                                                    <div class="col-xs-6">
                                                            <p  style="float:right;">
                                                                Demande N° : <b/>{{ entity.id }}</b> / Le <b>{{ entity.dateDemande|date("d-m-Y H:i:s") }}</b>
                                                            </p>
                                                    </div>
                                            </div>
                                            <hr/>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <h3>Informations demandeur:</h3>
                                                            <ul class="list-unstyled">
                                                                <li>
                                                                    <strong>{{entity.salarie.civilite}} {{entity.salarie.nomprenom}}</strong>
                                                                </li>
                                                                <li>
                                                                    Unité : <strong>{{ entity.salarie.unite }}</strong><br>
                                                                </li>
                                                                <li>
                                                                    N° matricule : <strong>{{entity.salarie.matricule}}</strong><br><br>
                                                                </li>
                                                                <li>
                                                                    Date d'embauche : <strong>{{ entity.salarie.dateEmbauche|date("d-m-Y")  }}</strong><br><br>
                                                                </li>

                                                            </ul>
                                                    </div>
                                            </div>
                                            <div class="row">
                                                <hr/>
                                                    <div class="col-xs-12">
                                                        <p class="m-t m-b">Objet :
                                                            <strong>
                                                                {% if entity.typeDemande == 'Conge' %}Demande de congé payé.{% endif %}
                                                                {% if entity.typeDemande == 'Permission' %}
                                                                        Demande de permission exceptionnelle ( {{ entity.motif }} )
                                                                {% endif %}
                                                                {% if entity.typeDemande == 'Absence exceptionnelle' %}
                                                                        Demande d'absence exceptionnelle.
                                                                {% endif %}
                                                            </strong><br>
                                                        </p>

                                                        <p style="text-align: justify;">Madame, Monsieur,<br/>
                                                             {% if entity.typeDemande == 'Conge' %}
                                                                    Conformément au planning des départs en congé du personnel{% if entity.salarie.unite.estService or entity.salarie.unite.estDepartement %} du {{ entity.salarie.unite }},{% else %} de la {{ entity.salarie.unite }} ,{% endif %}<br>
                                                                    je viens, par la présente, solliciter <strong>{{ entity.nbjoursOuvrables }} jour(s)</strong>  de congés,du <strong><strong>{{ entity.dateDebut|date("d-m-Y") }}</strong></strong> (date effective de début), au <strong> {{ entity.dateFin|date("d-m-Y") }}</strong>  (date de fin de congé).Je reprendrai le service le {{ entity.dateRetour|date("d-m-Y") }} matin.<br>
                                                                    Je voudrais, à toutes fins utiles, porter à votre connaissance que mes droits à congé des années précédentes s'établissent à  {{entity.salarie.droits.reliquatDroitsAnterieur}} jour(s), majorés de {{entity.salarie.droits.droitsAcquisAnneeEnCours}} jour(s) acquis au titre de l'année {{ entity.dateDemande|date('Y')}}.<br>
																	Je dispose à ce jour, de <strong>{{ entity.soldeDroits}} jour(s)</strong> de droits à congés.<br>
                                                                {% endif %}
                                                                {% if entity.typeDemande == 'Permission' %}
                                                                    J'ai l'honneur de solliciter, par la présente,<strong>{{ entity.nbjoursOuvrables }} jour(s)</strong> de permission exceptionnelle pour des raisons familiales (motif spécifié : {{ entity.motif }}),<br>
																	du <strong>{{ entity.dateDebut|date("d-m-Y") }}</strong> (date effective de début), au <strong>{{ entity.dateFin|date("d-m-Y") }}</strong> (date de fin de permission). Je reprendrai le service le {{ entity.dateRetour|date("d-m-Y") }} matin.
                                                                {% endif %}	
                                                                {% if entity.typeDemande == 'Absence exceptionnelle' %}
                                                                    J'ai l'honneur de solliciter, par la présente, <strong>{{ entity.nbjoursOuvrables }} jour(s)</strong> d'absence pour convenance personnelle, du <strong>{{ entity.dateDebut|date("d-m-Y") }}</strong> (date effective de début), au <strong>{{ entity.dateFin|date("d-m-Y") }}</strong>.Je reprendrai le service le <strong>{{ entity.dateRetour|date("d-m-Y") }}</strong> matin.<br><br>
                                                                    
                                                                {% endif %}<br><br>
                                                                Dans l'attente de la suite qu'il vous plaira de réserver à  ma demande,<br>
                                                                Je vous prie d'agréer, Madame, Monsieur, mes salutations respectueuses.<br><br>
                                                        </p>	

                                                        <strong style="float:right;">{{entity.salarie.nomprenom}}</strong><br/>
                                                        <strong style="float:right;">{{ entity.salarie.poste }}</strong>
                                                        <hr/><br/>
							
                                                    </div>
                                                </div>
                                                <div class="row">
                                                     {% if entity.estValideNiveau1 %}
                                                        {% if entity.valideurNiveau1 != entity.valideurFinal %}
                                                            <div class="col-md-4">
                                                                <div class="well">
                                                                        <address>
                                                                            <strong class="text-success">PREMIERE VALIDATION</strong><br/>
                                                                            le  {{ entity.dateValidation1|date('d-m-Y H:i:s') }}<br/>
                                                                            par: {{ entity.valideurNiveau1  }}<br/>
                                                                            poste: <strong>{{ entity.valideurNiveau1.poste  }}</strong><br/>
                                                                        </address>	
                                                                </div>
                                                            </div>      
                                                        {% else %}
                                                            <div class="col-md-4">
                                                                <div class="well">
                                                                    <address>
                                                                        <strong class="text-success">PREMIERE ET DERNIERE VALIDATION</strong><br/>
                                                                        le  {{ entity.dateValidation1|date('d-m-Y H:i:s') }}<br/>
                                                                        par: {{ entity.valideurNiveau1  }}<br/>
                                                                        poste: <strong>{{ entity.valideurNiveau1.poste  }}</strong><br/>
                                                                    </address>	
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if entity.valideurNiveau2 %}
                                                            {% if entity.estValideNiveau2 %}
                                                                {%if entity.valideurNiveau2 == entity.valideurFinal %}
                                                                    <div class="col-md-4">
                                                                        <div class="well">
                                                                            <address>
                                                                                <strong class="text-success">DERNIERE VALIDATION</strong><br/>
                                                                                <strong class="text-success">Demande cloturée</strong><br/>
                                                                                le  {{ entity.dateValidation|date('d-m-Y H:i:s') }}<br/>
                                                                                par: {{ entity.valideurNiveau2  }} , <br/>
                                                                                poste:{{ entity.valideurNiveau2.poste  }}<br/>
                                                                            </address>
                                                                        </div>
                                                                    </div>
                                                                {% else %}
                                                                    <div class="col-md-4">
                                                                        <div class="well">
                                                                            <address>
                                                                                <strong class="text-success">DEUXIEME VALIDATION</strong><br/>
                                                                                le  {{ entity.dateValidation2|date('d-m-Y H:i:s') }}<br/>
                                                                                par: {{ entity.valideurNiveau2  }} , <br/>
                                                                                poste:<strong>{{ entity.valideurNiveau2.poste  }}</strong><br/>
                                                                            </address>
                                                                        </div>
                                                                    </div>
                                                                    {% if entity.estValide %}        
                                                                        <div class="col-md-4">
                                                                            <div class="well">
                                                                                <address>
                                                                                    <strong class="text-success">DERNIERE VALIDATION</strong><br/>
                                                                                    le  {{ entity.dateValidation|date('d-m-Y H:i:s') }}<br/>
                                                                                    par: {{ entity.valideurFinal  }} , <br/>
                                                                                    poste:<strong>{{ entity.valideurFinal.poste  }}</strong><br/>
                                                                                </address>
                                                                            </div>
                                                                        </div>
                                                                    {% endif %}            

                                                                {% endif %}
                                                             {% endif %}   
                                                        {% endif %}    
                                                    {% endif %}
                                                    {% if entity.estRefuse %} 
                                                        <div class="col-md-4 invoice-block">
                                                            <div class="well">
                                                                <ul class="list-unstyled amounts">
                                                                    <li>
                                                                        <strong class="text-danger">DEMANDE REFUSEE </strong>
                                                                    </li>
                                                                    <li>
                                                                        <strong class="text-danger">Demande cloturée </strong>
                                                                    </li>
                                                                    <li>
                                                                        <strong>Le</strong> {{ entity.dateRefus|date("d-m-Y H:i:s") }}
                                                                    </li>
                                                                    <li>
                                                                        <strong>Par:</strong> {{ entity.refusePar }}, <strong>{{ entity.refusePar.poste }}</strong>
                                                                    </li>
                                                                    <li>
                                                                        <strong>Motif refus:</strong> {{ entity.raisonRefus }} 
                                                                    </li>
                                                                </ul>
                                                                <br/>

                                                                </div>
                                                                </div>
                                                   {% endif %}
                                            </div>
                                    </div>
                            </div>
                    </div>

            </div>
        </div>
        
</div>


{% endblock %}
